# ==============================================
# TRUSTLAYER ENVIRONMENT CONFIGURATION
# ==============================================

# Application
NODE_ENV=production
APP_NAME=TrustLayer
APP_URL=https://trustlayer.seudominio.com
VITE_APP_NAME=TrustLayer
VITE_APP_VERSION=1.0.0

# Ports
FRONTEND_PORT=3000
BACKEND_PORT=3001
POSTGRES_PORT=5432
REDIS_PORT=6379
HTTP_PORT=80
HTTPS_PORT=443

# Database (PostgreSQL)
POSTGRES_USER=trustlayer
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
POSTGRES_DB=trustlayer
DATABASE_URL=postgresql://trustlayer:CHANGE_ME_STRONG_PASSWORD@postgres:5432/trustlayer

# Supabase Configuration
VITE_SUPABASE_URL=http://127.0.0.1:54321
VITE_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here
VITE_ALLOW_LOCAL_ENDPOINTS=false
ALLOW_LOCAL_ENDPOINTS=false

# API Configuration
VITE_API_URL=http://localhost:3001
API_BASE_URL=http://localhost:3001

# JWT Authentication
JWT_SECRET=CHANGE_ME_GENERATE_WITH_openssl_rand_base64_32
JWT_EXPIRATION=7d
JWT_REFRESH_EXPIRATION=30d

# Session
SESSION_SECRET=CHANGE_ME_ANOTHER_STRONG_SECRET
SESSION_MAX_AGE=86400000
VITE_IDLE_TIMEOUT_MINUTES=30
VITE_SESSION_MAX_MINUTES=480

# Email (SMTP)
SMTP_ENABLED=true
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password
SMTP_FROM=noreply@trustlayer.com
SMTP_FROM_NAME=TrustLayer

# File Upload & Storage
STORAGE_PROVIDER=local
STORAGE_PATH=/app/uploads
STORAGE_MAX_FILE_SIZE=5242880
VITE_IMPORT_MAX_FILE_BYTES=5242880
VITE_IMPORT_MAX_CELL_CHARS=2000
VITE_IMPORT_MAX_ROWS=5000
VITE_IMPORT_MALWARE_SCAN_URL=
VITE_IMPORT_MALWARE_SCAN_REQUIRED=false
MAX_REQUEST_BODY_BYTES=10485760

# AWS S3 (if using S3)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_S3_BUCKET=
# AWS_S3_REGION=us-east-1

# SSO/SAML
SAML_ENABLED=false
SAML_ENTRY_POINT=https://idp.exemplo.com/sso
SAML_ISSUER=trustlayer
SAML_CALLBACK_URL=https://trustlayer.seudominio.com/api/auth/saml/callback
SAML_CERT_PATH=/app/certs/saml/cert.pem
SAML_KEY_PATH=/app/certs/saml/key.pem

# MFA
MFA_ENABLED=true
MFA_ISSUER=TrustLayer
MFA_WINDOW=1

# Redis Cache (optional)
REDIS_ENABLED=false
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD
REDIS_DB=0

# Observability (OpenTelemetry)
OTEL_ENABLED=false
OTEL_SERVICE_NAME=trustlayer
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4318
OTEL_EXPORTER_OTLP_TRACES_ENDPOINT=http://otel-collector:4318/v1/traces
OTEL_EXPORTER_OTLP_METRICS_ENDPOINT=http://otel-collector:4318/v1/metrics

# Logging
LOG_LEVEL=info
LOG_FORMAT=json
LOG_FILE_PATH=/app/logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=7

# Feature Flags
FEATURE_AI_ASSISTANT=true
FEATURE_AUDIO_ENABLED=true
FEATURE_AUDITOR_ROLE=true
FEATURE_REPORTS_ADVANCED=true
FEATURE_CUSTOM_DASHBOARDS=false
FEATURE_THEMES=false
VITE_ANALYTICS_EXPORT_ENABLED=false
VITE_ALLOW_INLINE_SECRETS=false

# Security & CORS
RATE_LIMIT_ENABLED=true
RATE_LIMIT_WINDOW_SECONDS=60
AI_ASSISTANT_RATE_LIMIT_MAX=60
AUDIT_LOG_RATE_LIMIT_MAX=120
SIEM_FORWARD_RATE_LIMIT_MAX=60
ANALYTICS_EXPORT_RATE_LIMIT_MAX=60
ALLOWED_ORIGINS=https://trustlayer.seudominio.com
CORS_CREDENTIALS=true

# Proxy Configuration
HTTP_PROXY=
HTTPS_PROXY=
NO_PROXY=localhost,127.0.0.1,::1

# Custom Certificates
CUSTOM_CA_CERT=
CUSTOM_CA_CERT_BASE64=

# AI Assistant Configuration
MAX_AI_MESSAGES=50
MAX_AI_MESSAGE_CHARS=4000
MAX_AI_TOTAL_CHARS=20000

# Audit & Compliance
AUDIT_GEO_LOOKUP_ENABLED=true
RETENTION_CHANGE_LOGS_DAYS=2555
RETENTION_SNAPSHOTS_DAYS=365
RETENTION_SIEM_METRICS_DAYS=90
RETENTION_APPLY=false

# External Integrations
SECRET_PROVIDER_URL=
SECRET_PROVIDER_TOKEN=
SECRET_PROVIDER_TIMEOUT_MS=10000
ANALYTICS_EXPORT_URL=
ANALYTICS_EXPORT_TOKEN=
ANALYTICS_EXPORT_TIMEOUT_MS=10000
ANALYTICS_EXPORT_INCLUDE_USER_ID=false

# AI/ML Services (optional)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4-turbo-preview
OPENAI_MAX_TOKENS=1000

# Monitoring & Alerts
SENTRY_DSN=
SENTRY_ENVIRONMENT=production

# Backup
BACKUP_ENABLED=false
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=

# Custom Branding
CUSTOM_LOGO_ENABLED=true
CUSTOM_THEME_ENABLED=false
