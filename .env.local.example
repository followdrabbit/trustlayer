# =============================================================================
# TRUSTLAYER - CONFIGURAÇÃO PARA DESENVOLVIMENTO LOCAL
# =============================================================================
# Este arquivo contém configurações otimizadas para desenvolvimento local.
# Copie para .env.local e ajuste conforme necessário.
#
# Uso:
#   cp .env.local.example .env.local
#   ./scripts/setup.sh
# =============================================================================

# -----------------------------------------------------------------------------
# Aplicação
# -----------------------------------------------------------------------------
NODE_ENV=development
APP_NAME=TrustLayer
APP_URL=http://localhost:5173
VITE_APP_NAME=TrustLayer
VITE_APP_VERSION=dev

# -----------------------------------------------------------------------------
# Portas (ajuste se houver conflitos)
# -----------------------------------------------------------------------------
FRONTEND_PORT=5173
BACKEND_PORT=3001
POSTGRES_PORT=5432
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# Banco de Dados PostgreSQL
# -----------------------------------------------------------------------------
# Credenciais locais (não use em produção!)
POSTGRES_USER=trustlayer
POSTGRES_PASSWORD=trustlayer_local
POSTGRES_DB=trustlayer
DATABASE_URL=postgresql://trustlayer:trustlayer_local@localhost:5432/trustlayer

# -----------------------------------------------------------------------------
# Supabase Local
# -----------------------------------------------------------------------------
# Use 'npx supabase start' para obter as chaves locais
# Ou use o docker-compose.local.yml com PostgreSQL direto
VITE_SUPABASE_URL=http://127.0.0.1:54321
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6ImFub24iLCJleHAiOjE5ODM4MTI5OTZ9.CRXP1A7WOeoJeXxjNni43kdQwgnWNReilDMblYTn_I0
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZS1kZW1vIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImV4cCI6MTk4MzgxMjk5Nn0.EGIM96RAZx35lJzdJsyH-qQwv8Hdp7fsn3W0YpN81IU

# Permitir endpoints locais para desenvolvimento
VITE_ALLOW_LOCAL_ENDPOINTS=true
ALLOW_LOCAL_ENDPOINTS=true

# -----------------------------------------------------------------------------
# API
# -----------------------------------------------------------------------------
VITE_API_URL=http://localhost:3001
API_BASE_URL=http://localhost:3001

# -----------------------------------------------------------------------------
# JWT e Sessão (valores de desenvolvimento)
# -----------------------------------------------------------------------------
JWT_SECRET=local-dev-jwt-secret-change-in-production
JWT_EXPIRATION=7d
JWT_REFRESH_EXPIRATION=30d
SESSION_SECRET=local-dev-session-secret-change-in-production
SESSION_MAX_AGE=86400000

# Timeouts relaxados para desenvolvimento
VITE_IDLE_TIMEOUT_MINUTES=0
VITE_SESSION_MAX_MINUTES=0

# -----------------------------------------------------------------------------
# Email (Mailhog para testes)
# -----------------------------------------------------------------------------
SMTP_ENABLED=true
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=
SMTP_FROM=noreply@trustlayer.local
SMTP_FROM_NAME=TrustLayer Dev

# -----------------------------------------------------------------------------
# Storage
# -----------------------------------------------------------------------------
STORAGE_PROVIDER=local
STORAGE_PATH=./uploads
STORAGE_MAX_FILE_SIZE=52428800

# Limites relaxados para desenvolvimento
VITE_IMPORT_MAX_FILE_BYTES=52428800
VITE_IMPORT_MAX_CELL_CHARS=10000
VITE_IMPORT_MAX_ROWS=50000
VITE_IMPORT_MALWARE_SCAN_URL=
VITE_IMPORT_MALWARE_SCAN_REQUIRED=false
MAX_REQUEST_BODY_BYTES=52428800

# -----------------------------------------------------------------------------
# Autenticação (SSO/SAML desabilitado para dev)
# -----------------------------------------------------------------------------
SAML_ENABLED=false
MFA_ENABLED=false
MFA_ISSUER=TrustLayer-Dev

# -----------------------------------------------------------------------------
# Cache Redis (opcional)
# -----------------------------------------------------------------------------
REDIS_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# -----------------------------------------------------------------------------
# Observabilidade (desabilitado para dev)
# -----------------------------------------------------------------------------
OTEL_ENABLED=false
OTEL_SERVICE_NAME=trustlayer-dev
OTEL_EXPORTER_OTLP_ENDPOINT=

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------
LOG_LEVEL=debug
LOG_FORMAT=pretty
LOG_FILE_PATH=./logs/app.log
LOG_MAX_SIZE=10m
LOG_MAX_FILES=3

# -----------------------------------------------------------------------------
# Feature Flags (todas habilitadas para dev)
# -----------------------------------------------------------------------------
FEATURE_AI_ASSISTANT=true
FEATURE_AUDIO_ENABLED=true
FEATURE_AUDITOR_ROLE=true
FEATURE_REPORTS_ADVANCED=true
FEATURE_CUSTOM_DASHBOARDS=true
FEATURE_THEMES=true
VITE_ANALYTICS_EXPORT_ENABLED=false
VITE_ALLOW_INLINE_SECRETS=true

# -----------------------------------------------------------------------------
# CORS (permissivo para dev)
# -----------------------------------------------------------------------------
RATE_LIMIT_ENABLED=false
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,http://127.0.0.1:5173
CORS_CREDENTIALS=true

# -----------------------------------------------------------------------------
# Proxy (deixe vazio para dev)
# -----------------------------------------------------------------------------
HTTP_PROXY=
HTTPS_PROXY=
NO_PROXY=localhost,127.0.0.1,::1

# -----------------------------------------------------------------------------
# AI Assistant
# -----------------------------------------------------------------------------
MAX_AI_MESSAGES=100
MAX_AI_MESSAGE_CHARS=10000
MAX_AI_TOTAL_CHARS=100000

# OpenAI (opcional - deixe vazio para usar Lovable AI Gateway)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4-turbo-preview

# -----------------------------------------------------------------------------
# Auditoria (retenção longa para dev)
# -----------------------------------------------------------------------------
AUDIT_GEO_LOOKUP_ENABLED=false
RETENTION_CHANGE_LOGS_DAYS=365
RETENTION_SNAPSHOTS_DAYS=365
RETENTION_SIEM_METRICS_DAYS=90
RETENTION_APPLY=false

# -----------------------------------------------------------------------------
# Integrações Externas (desabilitadas para dev)
# -----------------------------------------------------------------------------
SECRET_PROVIDER_URL=
SECRET_PROVIDER_TOKEN=
ANALYTICS_EXPORT_URL=
ANALYTICS_EXPORT_TOKEN=

# -----------------------------------------------------------------------------
# Monitoring (desabilitado para dev)
# -----------------------------------------------------------------------------
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# -----------------------------------------------------------------------------
# Backup (desabilitado para dev)
# -----------------------------------------------------------------------------
BACKUP_ENABLED=false

# -----------------------------------------------------------------------------
# Usuário Admin Padrão (para setup inicial)
# -----------------------------------------------------------------------------
ADMIN_EMAIL=admin@trustlayer.local
ADMIN_PASSWORD=Admin@123456
